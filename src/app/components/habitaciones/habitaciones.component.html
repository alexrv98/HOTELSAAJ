<app-navbar></app-navbar>
<app-filtro-hoteles [filtros]="filtros"></app-filtro-hoteles>

<div class="container">
  <div *ngIf="isLoading; else mostrarHabitaciones">
    <div class="col-12 col-md-8">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <!-- Títulos alineados a la izquierda -->
        <h4 class="text-secondary m-0">
          <span
            class="placeholder placeholder-glow"
            style="width: 200px; height: 45px"
          ></span>
        </h4>

        <!-- Contenedor de los filtros alineado a la derecha -->
        <div class="d-flex gap-2">
          <div class="form-floating">
            <span
              class="placeholder placeholder-wave d-block"
              style="width: 150px; height: 45px"
            ></span>
          </div>
          <div class="form-floating">
            <span
              class="placeholder placeholder-wave d-block"
              style="width: 150px; height: 45px"
            ></span>
          </div>
        </div>
      </div>
      <div class="card shadow-sm mb-3" *ngFor="let _ of [1, 2, 3]">
        <div class="card-body d-flex align-items-center">
          <!-- Placeholder de imagen -->
          <span
            class="placeholder placeholder-wave me-3"
            style="width: 300px; height: 180px; display: block"
          ></span>

          <div class="flex-grow-1">
            <h5 class="card-title text-secondary">
              <span class="placeholder placeholder-glow col-6"></span>
            </h5>
            <p class="card-text mb-1">
              <span class="placeholder placeholder-wave col-4"></span>
            </p>
            <p class="card-text mb-1">
              <span class="placeholder placeholder-glow col-5"></span>
            </p>
            <p class="card-text fw-bold">
              <span class="placeholder placeholder-wave col-3"></span>
            </p>
            <p class="card-text fw-bold">
              <span class="placeholder placeholder-glow col-4"></span>
            </p>
            <button
              class="btn btn-primary btn-lg mt-2 w-100 rounded-0 disabled"
            >
              <span class="placeholder placeholder-wave col-6"></span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Placeholder de comentarios -->
    <div class="col-12 col-md-4 mt-3 mt-md-0">
      <div class="card shadow-sm p-3">
        <h5 class="text-secondary">
          <span class="placeholder placeholder-glow col-6"></span>
        </h5>
        <p><span class="placeholder placeholder-wave col-10"></span></p>
        <p><span class="placeholder placeholder-glow col-8"></span></p>
        <p><span class="placeholder placeholder-wave col-9"></span></p>
      </div>
    </div>
  </div>

  <!-- Mostrar habitaciones reales cuando cargue -->
  <ng-template #mostrarHabitaciones>
    <div class="row">
      <!-- Columna de habitaciones disponibles -->
      <div class="col-12 col-md-8">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <!-- Títulos alineados a la izquierda -->
          <div>
            <h4 class="text-secondary m-0">Habitaciones disponibles</h4>
            <h5 class="fw-bold text-primary m-0 mt-1">Mejores opciones</h5>
          </div>

          <!-- Contenedor de los filtros alineado a la derecha -->
          <div class="d-flex gap-2">
            <div class="form-floating">
              <input
                type="number"
                id="precioMin"
                class="form-control"
                [(ngModel)]="filtroPrecioMin"
                (input)="filtrarPorPrecio()"
              />
              <label for="precioMin" class="form-label">Precio mínimo:</label>
            </div>
            <div class="form-floating">
              <input
                type="number"
                id="precioMax"
                class="form-control"
                [(ngModel)]="filtroPrecioMax"
                (input)="filtrarPorPrecio()"
              />
              <label for="precioMax" class="form-label">Precio máximo:</label>
            </div>
          </div>
        </div>

        <!-- Mejores opciones -->
        <div *ngIf="habitaciones.mejorOpcion.length > 0">
          <div
            class="card shadow-sm mb-3"
            *ngFor="let habitacion of habitaciones.mejorOpcion"
          >
            <div class="card-body d-flex align-items-center">
              <img
                src="assets/habitacion.jpg"
                alt="Imagen de la habitación"
                class="room-image me-3"
                width="100%"
                height="auto"
                style="max-width: 300px"
              />
              <div class="flex-grow-1">
                <h5 class="card-title text-secondary">
                  {{ habitacion.tipo_habitacion }}
                </h5>
                <p class="card-text mb-1">
                  <strong>No. Habitación:</strong>
                  {{ habitacion.numero_habitacion }}
                </p>
                <p class="card-text mb-1">
                  <strong>Capacidad:</strong>
                  {{ habitacion.capacidad }} persona(s)
                </p>
                <p class="card-text fw-bold">
                  <strong>Numero de camas:</strong> {{ habitacion.camas }}
                </p>
                <p class="card-text fw-bold">
                  <strong>Precio por noche:</strong> MXN {{ habitacion.precio }}
                </p>
                <button
                  type="button"
                  class="btn btn-primary btn-lg mt-2 w-100 rounded-0"
                  data-bs-toggle="modal"
                  data-bs-target="#reserva"
                  (click)="seleccionarHabitacion(habitacion)"
                >
                  Reservar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Columna de comentarios -->
      <div class="col-12 col-md-4 mt-3 mt-md-0">
        <app-comentarios></app-comentarios>
      </div>
    </div>
  </ng-template>

  <!-- Otras habitaciones -->
  <div *ngIf="habitaciones.otrasHabitaciones.length > 0">
    <h5 class="fw-bold mt-4">Otras habitaciones</h5>
    <div class="position-relative">
      <div class="d-flex overflow-auto" id="scrollContainer">
        <div
          class="col-6 col-md-3 mb-3 d-flex flex-shrink-0"
          *ngFor="let habitacion of habitaciones.otrasHabitaciones"
        >
          <div class="card w-100 lugar-card shadow-sm">
            <img
              src="assets/habitacion2.jpg"
              alt="Habitación"
              height="200"
              class="w-100"
            />
            <div class="card-body d-flex flex-column">
              <h5 class="card-title text-secondary">
                {{ habitacion.tipo_habitacion }}
              </h5>
              <p class="card-text mb-1">
                <strong>No. Habitación:</strong>
                {{ habitacion.numero_habitacion }}
              </p>
              <p class="card-text mb-1">
                <strong>Capacidad:</strong>
                {{ habitacion.capacidad }} persona(s)
              </p>
              <p class="card-text fw-bold">
                <strong>Numero de camas:</strong> {{ habitacion.camas }}
              </p>
              <p class="card-text fw-bold">
                <strong>Precio por noche:</strong> MXN ${{ habitacion.precio }}
              </p>
              <button
                type="button"
                class="btn btn-primary btn-lg mt-2 w-100 rounded-0"
                data-bs-toggle="modal"
                data-bs-target="#reserva"
                (click)="seleccionarHabitacion(habitacion)"
              >
                Reservar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Botones de desplazamiento -->
      <button
        class="btn bg-dark text-white btn-lg p-3 shadow position-absolute start-0 top-50 translate-middle-y"
        (click)="scrollLeft()"
      >
        <i class="fa-solid fa-angles-left" style="color: #ffffff"></i>
      </button>
      <button
        class="btn bg-dark text-white btn-lg p-3 shadow position-absolute end-0 top-50 translate-middle-y"
        (click)="scrollRight()"
      >
        <i class="fa-solid fa-angles-right" style="color: #ffffff"></i>
      </button>
    </div>
  </div>
</div>

<!-- Modal de reserva -->
<app-modal-reserva
  [habitacion]="habitacionSeleccionada"
  [filtros]="filtros"
></app-modal-reserva>
<app-footer></app-footer>
